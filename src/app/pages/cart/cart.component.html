<ng-container *ngIf="products.length != 0">
  <div class="container mx-auto p-4">
    <div class="bg-white shadow rounded-lg overflow-hidden">
      <div class="overflow-x-auto">
        <table class="min-w-full divide-y divide-gray-200">
          <thead class="bg-gray-50">
            <tr>
              <th
                class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"
              >
                Sr.No
              </th>
              <th
                class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"
              >
                Produto
              </th>
              <th
                class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"
              >
                Imagem
              </th>
              <th
                class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"
              >
                Preço
              </th>
              <th
                class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"
              >
                Quantidade
              </th>
              <th
                class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"
              >
                Ação
              </th>
            </tr>
          </thead>
          <tbody class="bg-white divide-y divide-gray-200">
            <tr *ngFor="let item of products; let i = index">
              <td class="px-6 py-4 whitespace-nowrap text-sm">{{ i + 1 }}</td>
              <td class="px-6 py-4 whitespace-nowrap text-sm">
                {{ item.title }}
              </td>
              <td class="px-6 py-4 whitespace-nowrap text-sm">
                <img
                  class="w-16 h-16 object-cover"
                  [src]="item.image"
                  alt="{{ item.title }}"
                />
              </td>
              <td class="px-6 py-4 whitespace-nowrap text-sm">
                {{ item.price | currency : "BRL" }}
              </td>
              <td class="px-6 py-4 whitespace-nowrap text-sm">
                {{ item.quantity }}
              </td>
              <td class="px-6 py-4 whitespace-nowrap text-sm">
                <button
                  mat-icon-button
                  color="warn"
                  aria-label="Remover produto"
                  (click)="removeItem(item)"
                >
                  <mat-icon>delete_outline</mat-icon>
                </button>
              </td>
            </tr>
            <tr>
              <td colspan="4"></td>
              <td
                class="px-6 py-4 whitespace-nowrap text-right font-bold"
                colspan="2"
              >
                Total da compra: {{ grandTotal | currency : "BRL" }}
              </td>
              <td class="px-6 py-4 whitespace-nowrap text-right">
                <button
                  class="bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600"
                >
                  Finalizar Compra
                </button>
              </td>
            </tr>
            <tr>
              <td colspan="4"></td>
              <td class="px-6 py-4 whitespace-nowrap">
                <button
                  (click)="emptyCart()"
                  class="bg-red-400 text-white px-4 py-2 rounded hover:bg-red-600"
                >
                  Esvaziar Carrinho
                </button>
              </td>
              <td class="px-6 py-4 whitespace-nowrap" colspan="2">
                <button
                  routerLink="/home"
                  class="bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600"
                >
                  Ir para a Loja
                </button>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
</ng-container>

<ng-container *ngIf="products.length == 0">
  <div class="container mx-auto p-4 text-center">
    <div class="bg-white shadow rounded-lg p-6">
      <h5 class="text-2xl font-semibold mb-4">Meu carrinho</h5>
      <div class="flex flex-col items-center">
        <img
          class="w-64 h-64 object-contain"
          src="https://rukminim1.flixcart.com/www/800/800/promos/16/05/2019/d438a32e-765a-4d8b-b4a6-520b560971e8.png?q=90"
          alt="Carrinho Vazio"
        />
        <h4 class="text-xl font-semibold mt-4">Seu carrinho está vazio!</h4>
        <h6 class="text-gray-600 mt-2">Escolha algum produto</h6>
        <button
          routerLink="/home"
          class="bg-red-400 text-white px-6 py-2 rounded mt-4 hover:shadow-lg"
        >
          Ir para a Loja
        </button>
      </div>
    </div>
  </div>
</ng-container>
